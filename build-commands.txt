!! Changing: Label the docker images with  $  date + first 7 char of commit id 

As one
===
note that |(pipe) binds before &&(chain)

in smsn(-develop)
  # PITFALL: do this from smsn or smsn-develop
  # PITFALL: gradle version must be 4, not later
  gradle clean build
  gradle :smsn-server:shadowJar

  # PITFALL: Be sure only one .jar file matches the pattern below,
    # because the Dockerfile wildcard-copies anything like it

  # do this from that same folder
    cp smsn-server/build/libs/smsn-server-*.jar \
          ~/smsn+/docker-smsn

in docker-smsn # edit the appropriate Dockerfile, if needed

  # run one of these
    # master
    docker build -f Dockerfile -t	        \
      jeffreybbrown/smsn:untested .				\
      | tee logs/"build-log.`date`.txt"
    # develop
    docker build -f Dockerfile -t	        \
      jeffreybbrown/smsn-develop:untested .			\
      | tee logs/"build-log.develop.`date`.txt"
    # emacs-too
    docker build -f Dockerfile -t       \
      jeffreybbrown/smsn-emacs-too:untested .		\
      | tee logs/"build-log.emacs-too.`date`.txt"

  # create one of these links from .emacs.d/elisp/ (if needed)
    # or just change their names, if both links already exist

    # master
    ln -s /home/jeff/smsn+/mode/lisp smsn-mode-lisp
    # develop
    ln -s /home/jeff/smsn+/mode-develop/lisp smsn-mode-lisp

Debug
=====
# Run this on an incomplete build to try to build the rest of the way.
docker run --name smsn -it \
  -v /home/jeff/Encfs/kb-no-encfs:/mnt/smsn-data \
  -p 8183:8182 \
  -h 127.0.0.1 \
  jeffreybbrown/smsn-develop:untested

Test
====
Test master or develop
---
Configure emacs (if needed):
  In emacs.d/elisp/, fiddle with the link (there are scripts for this):
    ln -s /home/jeff/smsn+/mode/lisp smsn-mode-lisp 
    ln -s /home/jeff/smsn+/mode-develop/lisp smsn-mode-lisp
  In .emacs
    change the port between 8182 and 8183
    was done ? toggle between smsn-mode and brain-mode
      conditional on Josh saying okay to push it

Run the docker image
  Prepare | what differs
    Note inconsistency: Elsewhere, master is made explicit; here, develop
    Be inconsistent: Use DIFFERENT VCS FOLDERS if running two docker containers
    Fiddle the first(native) port between 8182 and 8183.
      The second(Docker) port is always 8182.

  Run develop branch, on REAL DATA
    docker run --name smsn -itd -v /home/jeff/Encfs/kb-not-encfs:/mnt/smsn-data -p 8182:8182 -h 127.0.0.1 jeffreybbrown/smsn-develop

  Run master branch, from empty
    docker run --name smsn -itd -v /home/jeff/Encfs/kb-not-encfs-blank:/mnt/smsn-data -p 8183:8182 -h 127.0.0.1 jeffreybbrown/smsn

Test emacs-too
---
docker run --name smsn -v /home/jeff/???/emacs-too-kb:/mnt/smsn-data jeffreybbrown/smsn-emacs-too:untested

Save
===
!! Changing: Label the docker images with  $  date + first 7 char of commit id

After running each, test it. If it works, change the tag (substitute for DATE-EXPRESSION):
  -- duh
    docker tag smsn:just-built smsn:DATE-EXPRESSION
    docker tag smsn:just-built smsn:latest
  
    docker tag smsn-develop:just-built smsn-develop:DATE-EXPRESSION
    docker tag smsn-develop:just-built smsn-develop:latest
